   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"Eeprom.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.align	1
  18              		.p2align 2,,3
  19              		.global	eeprom_writeConfigByte
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	eeprom_writeConfigByte:
  25              	.LVL0:
  26              	.LFB1:
  27              		.file 1 "hal/comm/Eeprom.c"
   1:hal/comm/Eeprom.c **** /*
   2:hal/comm/Eeprom.c ****  * Eeprom.c
   3:hal/comm/Eeprom.c ****  *
   4:hal/comm/Eeprom.c ****  *  Created on: 01.04.2020
   5:hal/comm/Eeprom.c ****  *      Author: OK / ED
   6:hal/comm/Eeprom.c ****  */
   7:hal/comm/Eeprom.c **** 
   8:hal/comm/Eeprom.c **** #include "Eeprom.h"
   9:hal/comm/Eeprom.c **** #include "SPI.h"
  10:hal/comm/Eeprom.c **** 
  11:hal/comm/Eeprom.c **** /* initialize the eeprom and read the default parameters from eeprom */
  12:hal/comm/Eeprom.c **** void eeprom_initConfig(TModuleConfig *moduleConfigL, TMotorConfig *motorConfigL)
  13:hal/comm/Eeprom.c **** {
  14:hal/comm/Eeprom.c **** 	// initialize the eeprom
  15:hal/comm/Eeprom.c **** 	if (eeprom_readConfigByte(TMCM_ADDR_EEPROM_MAGIC) != TMCM_EEPROM_MAGIC)
  16:hal/comm/Eeprom.c **** 	{
  17:hal/comm/Eeprom.c **** 		// clear eeprom (to know if erease has been interrupted before)
  18:hal/comm/Eeprom.c **** 		eeprom_writeConfigByte(TMCM_ADDR_EEPROM_MAGIC, 0);
  19:hal/comm/Eeprom.c **** 
  20:hal/comm/Eeprom.c **** 		// overwrite module configuration
  21:hal/comm/Eeprom.c **** 		eeprom_writeConfigBlock(TMCM_ADDR_MODULE_CONFIG, (uint8_t *)moduleConfigL, sizeof(TModuleConfig))
  22:hal/comm/Eeprom.c **** 
  23:hal/comm/Eeprom.c **** 		// overwrite motor configuration
  24:hal/comm/Eeprom.c **** 		eeprom_writeConfigBlock(TMCM_ADDR_MOTOR_CONFIG, (uint8_t *)motorConfigL, sizeof(TMotorConfig));
  25:hal/comm/Eeprom.c **** 
  26:hal/comm/Eeprom.c **** 		// update magic byte
  27:hal/comm/Eeprom.c **** 		eeprom_writeConfigByte(TMCM_ADDR_EEPROM_MAGIC, TMCM_EEPROM_MAGIC);
  28:hal/comm/Eeprom.c **** 	}
  29:hal/comm/Eeprom.c **** 
  30:hal/comm/Eeprom.c **** 	// read the default module configuration from EEPROM
  31:hal/comm/Eeprom.c **** 	eeprom_readConfigBlock(TMCM_ADDR_MODULE_CONFIG, (uint8_t *)moduleConfigL, sizeof(TModuleConfig));
  32:hal/comm/Eeprom.c **** 
  33:hal/comm/Eeprom.c **** 	// read the default motor configurations from EEPROM
  34:hal/comm/Eeprom.c **** 	eeprom_readConfigBlock(TMCM_ADDR_MOTOR_CONFIG, (uint8_t *)motorConfigL, sizeof(TMotorConfig));
  35:hal/comm/Eeprom.c **** }
  36:hal/comm/Eeprom.c **** 
  37:hal/comm/Eeprom.c **** /* write a byte into the configuration eeprom (address: 0..2047) */
  38:hal/comm/Eeprom.c **** void eeprom_writeConfigByte(uint32_t address, uint8_t value)
  39:hal/comm/Eeprom.c **** {
  28              		.loc 1 39 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  40:hal/comm/Eeprom.c **** 	// enable writing
  41:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x06, true);  		// command "Write Enable"
  32              		.loc 1 41 2 view .LVU1
  39:hal/comm/Eeprom.c **** 	// enable writing
  33              		.loc 1 39 1 is_stmt 0 view .LVU2
  34 0000 38B5     		push	{r3, r4, r5, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 16
  37              		.cfi_offset 3, -16
  38              		.cfi_offset 4, -12
  39              		.cfi_offset 5, -8
  40              		.cfi_offset 14, -4
  39:hal/comm/Eeprom.c **** 	// enable writing
  41              		.loc 1 39 1 view .LVU3
  42 0002 0446     		mov	r4, r0
  43 0004 0D46     		mov	r5, r1
  44              		.loc 1 41 2 view .LVU4
  45 0006 0620     		movs	r0, #6
  46              	.LVL1:
  47              		.loc 1 41 2 view .LVU5
  48 0008 0121     		movs	r1, #1
  49              	.LVL2:
  50              		.loc 1 41 2 view .LVU6
  51 000a FFF7FEFF 		bl	eeprom_spi_readWriteByte
  52              	.LVL3:
  53              	.L2:
  42:hal/comm/Eeprom.c **** 	do
  54              		.loc 1 42 2 is_stmt 1 discriminator 1 view .LVU7
  43:hal/comm/Eeprom.c **** 	{
  44:hal/comm/Eeprom.c **** 		eeprom_spi_readWriteByte(0x05, false);  // command "Get Status"
  55              		.loc 1 44 3 discriminator 1 view .LVU8
  56 000e 0021     		movs	r1, #0
  57 0010 0520     		movs	r0, #5
  58 0012 FFF7FEFF 		bl	eeprom_spi_readWriteByte
  59              	.LVL4:
  45:hal/comm/Eeprom.c **** 	} while((eeprom_spi_readWriteByte(0x00, true) & 0x02)==0x00);  // wait until "Write Enable"-Bit is
  60              		.loc 1 45 9 discriminator 1 view .LVU9
  61              		.loc 1 45 11 is_stmt 0 discriminator 1 view .LVU10
  62 0016 0121     		movs	r1, #1
  63 0018 0020     		movs	r0, #0
  64 001a FFF7FEFF 		bl	eeprom_spi_readWriteByte
  65              	.LVL5:
  66              		.loc 1 45 2 discriminator 1 view .LVU11
  67 001e 8207     		lsls	r2, r0, #30
  68 0020 F5D5     		bpl	.L2
  46:hal/comm/Eeprom.c **** 
  47:hal/comm/Eeprom.c **** 	// write
  48:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x02, false); 		// command "Write"
  69              		.loc 1 48 2 is_stmt 1 view .LVU12
  70 0022 0021     		movs	r1, #0
  71 0024 0220     		movs	r0, #2
  72 0026 FFF7FEFF 		bl	eeprom_spi_readWriteByte
  73              	.LVL6:
  49:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
  74              		.loc 1 49 2 view .LVU13
  75 002a 0021     		movs	r1, #0
  76 002c C4F30720 		ubfx	r0, r4, #8, #8
  77 0030 FFF7FEFF 		bl	eeprom_spi_readWriteByte
  78              	.LVL7:
  50:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
  79              		.loc 1 50 2 view .LVU14
  80 0034 0021     		movs	r1, #0
  81 0036 E0B2     		uxtb	r0, r4
  82 0038 FFF7FEFF 		bl	eeprom_spi_readWriteByte
  83              	.LVL8:
  51:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(value, true);
  84              		.loc 1 51 2 view .LVU15
  85 003c 0121     		movs	r1, #1
  86 003e 2846     		mov	r0, r5
  87 0040 FFF7FEFF 		bl	eeprom_spi_readWriteByte
  88              	.LVL9:
  89              	.L3:
  52:hal/comm/Eeprom.c **** 
  53:hal/comm/Eeprom.c **** 	// wait until write is finished
  54:hal/comm/Eeprom.c **** 	do
  90              		.loc 1 54 2 discriminator 1 view .LVU16
  55:hal/comm/Eeprom.c **** 	{
  56:hal/comm/Eeprom.c **** 		eeprom_spi_readWriteByte(0x05, false);  // command "Get Status"
  91              		.loc 1 56 3 discriminator 1 view .LVU17
  92 0044 0021     		movs	r1, #0
  93 0046 0520     		movs	r0, #5
  94 0048 FFF7FEFF 		bl	eeprom_spi_readWriteByte
  95              	.LVL10:
  57:hal/comm/Eeprom.c **** 	} while(eeprom_spi_readWriteByte(0x00, true) & 0x01);
  96              		.loc 1 57 9 discriminator 1 view .LVU18
  97              		.loc 1 57 10 is_stmt 0 discriminator 1 view .LVU19
  98 004c 0121     		movs	r1, #1
  99 004e 0020     		movs	r0, #0
 100 0050 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 101              	.LVL11:
 102              		.loc 1 57 2 discriminator 1 view .LVU20
 103 0054 C307     		lsls	r3, r0, #31
 104 0056 F5D4     		bmi	.L3
  58:hal/comm/Eeprom.c **** }
 105              		.loc 1 58 1 view .LVU21
 106 0058 38BD     		pop	{r3, r4, r5, pc}
 107              		.loc 1 58 1 view .LVU22
 108              		.cfi_endproc
 109              	.LFE1:
 111              		.align	1
 112 005a 00BF     		.p2align 2,,3
 113              		.global	eeprom_readConfigByte
 114              		.syntax unified
 115              		.thumb
 116              		.thumb_func
 118              	eeprom_readConfigByte:
 119              	.LVL12:
 120              	.LFB2:
  59:hal/comm/Eeprom.c **** 
  60:hal/comm/Eeprom.c **** /* read a byte from the configuration eeprom (address: 0..2047) */
  61:hal/comm/Eeprom.c **** uint8_t eeprom_readConfigByte(uint32_t address)
  62:hal/comm/Eeprom.c **** {
 121              		.loc 1 62 1 is_stmt 1 view -0
 122              		.cfi_startproc
 123              		@ args = 0, pretend = 0, frame = 0
 124              		@ frame_needed = 0, uses_anonymous_args = 0
  63:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x03, false);  	// command "Read"
 125              		.loc 1 63 2 view .LVU24
  62:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x03, false);  	// command "Read"
 126              		.loc 1 62 1 is_stmt 0 view .LVU25
 127 005c 10B5     		push	{r4, lr}
 128              	.LCFI1:
 129              		.cfi_def_cfa_offset 8
 130              		.cfi_offset 4, -8
 131              		.cfi_offset 14, -4
  62:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x03, false);  	// command "Read"
 132              		.loc 1 62 1 view .LVU26
 133 005e 0446     		mov	r4, r0
 134              		.loc 1 63 2 view .LVU27
 135 0060 0021     		movs	r1, #0
 136 0062 0320     		movs	r0, #3
 137              	.LVL13:
 138              		.loc 1 63 2 view .LVU28
 139 0064 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 140              	.LVL14:
  64:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 141              		.loc 1 64 2 is_stmt 1 view .LVU29
 142 0068 0021     		movs	r1, #0
 143 006a C4F30720 		ubfx	r0, r4, #8, #8
 144 006e FFF7FEFF 		bl	eeprom_spi_readWriteByte
 145              	.LVL15:
  65:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
 146              		.loc 1 65 2 view .LVU30
 147 0072 0021     		movs	r1, #0
 148 0074 E0B2     		uxtb	r0, r4
 149 0076 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 150              	.LVL16:
  66:hal/comm/Eeprom.c **** 	return eeprom_spi_readWriteByte(0, true);
 151              		.loc 1 66 2 view .LVU31
  67:hal/comm/Eeprom.c **** }
 152              		.loc 1 67 1 is_stmt 0 view .LVU32
 153 007a BDE81040 		pop	{r4, lr}
 154              	.LCFI2:
 155              		.cfi_restore 14
 156              		.cfi_restore 4
 157              		.cfi_def_cfa_offset 0
 158              	.LVL17:
  66:hal/comm/Eeprom.c **** 	return eeprom_spi_readWriteByte(0, true);
 159              		.loc 1 66 9 view .LVU33
 160 007e 0121     		movs	r1, #1
 161 0080 0020     		movs	r0, #0
 162 0082 FFF7FEBF 		b	eeprom_spi_readWriteByte
 163              	.LVL18:
 164              		.cfi_endproc
 165              	.LFE2:
 167              		.align	1
 168 0086 00BF     		.p2align 2,,3
 169              		.global	eeprom_writeConfigBlock
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 174              	eeprom_writeConfigBlock:
 175              	.LVL19:
 176              	.LFB3:
  68:hal/comm/Eeprom.c **** 
  69:hal/comm/Eeprom.c **** /* write a block into the configuration eeprom (using eeprom 25128), */
  70:hal/comm/Eeprom.c **** /* (address: (0..2047) (block: start address of the block) 			 */
  71:hal/comm/Eeprom.c **** void eeprom_writeConfigBlock(uint32_t address, uint8_t *block, uint32_t size)
  72:hal/comm/Eeprom.c **** {
 177              		.loc 1 72 1 is_stmt 1 view -0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
  73:hal/comm/Eeprom.c **** 	// enable reading
  74:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x06, true);  		// command "Write Enable"
 181              		.loc 1 74 2 view .LVU35
  72:hal/comm/Eeprom.c **** 	// enable reading
 182              		.loc 1 72 1 is_stmt 0 view .LVU36
 183 0088 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 184              	.LCFI3:
 185              		.cfi_def_cfa_offset 24
 186              		.cfi_offset 4, -24
 187              		.cfi_offset 5, -20
 188              		.cfi_offset 6, -16
 189              		.cfi_offset 7, -12
 190              		.cfi_offset 8, -8
 191              		.cfi_offset 14, -4
  72:hal/comm/Eeprom.c **** 	// enable reading
 192              		.loc 1 72 1 view .LVU37
 193 008c 0546     		mov	r5, r0
 194 008e 0E46     		mov	r6, r1
 195              		.loc 1 74 2 view .LVU38
 196 0090 0620     		movs	r0, #6
 197              	.LVL20:
 198              		.loc 1 74 2 view .LVU39
 199 0092 0121     		movs	r1, #1
 200              	.LVL21:
  72:hal/comm/Eeprom.c **** 	// enable reading
 201              		.loc 1 72 1 view .LVU40
 202 0094 1746     		mov	r7, r2
 203              		.loc 1 74 2 view .LVU41
 204 0096 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 205              	.LVL22:
 206              	.L12:
  75:hal/comm/Eeprom.c **** 	do
 207              		.loc 1 75 2 is_stmt 1 discriminator 1 view .LVU42
  76:hal/comm/Eeprom.c **** 	{
  77:hal/comm/Eeprom.c **** 		eeprom_spi_readWriteByte(0x05, false);  // command "Get Status"
 208              		.loc 1 77 3 discriminator 1 view .LVU43
 209 009a 0021     		movs	r1, #0
 210 009c 0520     		movs	r0, #5
 211 009e FFF7FEFF 		bl	eeprom_spi_readWriteByte
 212              	.LVL23:
  78:hal/comm/Eeprom.c **** 	} while((eeprom_spi_readWriteByte(0x00, true) & 0x02)==0x00);  // wait until "Write Enable"-Bit is
 213              		.loc 1 78 9 discriminator 1 view .LVU44
 214              		.loc 1 78 11 is_stmt 0 discriminator 1 view .LVU45
 215 00a2 0121     		movs	r1, #1
 216 00a4 0020     		movs	r0, #0
 217 00a6 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 218              	.LVL24:
 219              		.loc 1 78 2 discriminator 1 view .LVU46
 220 00aa 8207     		lsls	r2, r0, #30
 221 00ac F5D5     		bpl	.L12
  79:hal/comm/Eeprom.c **** 
  80:hal/comm/Eeprom.c **** 	// write (Startadresse)
  81:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x02, false); 		// command "Write"
 222              		.loc 1 81 2 is_stmt 1 view .LVU47
 223 00ae 0021     		movs	r1, #0
 224 00b0 0220     		movs	r0, #2
 225 00b2 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 226              	.LVL25:
  82:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 227              		.loc 1 82 2 view .LVU48
 228 00b6 0021     		movs	r1, #0
 229 00b8 C5F30720 		ubfx	r0, r5, #8, #8
 230 00bc FFF7FEFF 		bl	eeprom_spi_readWriteByte
 231              	.LVL26:
  83:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
 232              		.loc 1 83 2 view .LVU49
 233 00c0 0021     		movs	r1, #0
 234 00c2 E8B2     		uxtb	r0, r5
 235 00c4 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 236              	.LVL27:
  84:hal/comm/Eeprom.c **** 
  85:hal/comm/Eeprom.c **** 	// write data
  86:hal/comm/Eeprom.c **** 	uint32_t i;
 237              		.loc 1 86 2 view .LVU50
  87:hal/comm/Eeprom.c **** 	for(i=0; i<size; i++)
 238              		.loc 1 87 2 view .LVU51
 239              		.loc 1 87 11 view .LVU52
 240              		.loc 1 87 2 is_stmt 0 view .LVU53
 241 00c8 002F     		cmp	r7, #0
 242 00ca 40D0     		beq	.L19
 243              		.loc 1 87 7 view .LVU54
 244 00cc 0024     		movs	r4, #0
 245 00ce 013E     		subs	r6, r6, #1
 246              	.LVL28:
 247              		.loc 1 87 7 view .LVU55
 248 00d0 07F1FF38 		add	r8, r7, #-1
 249 00d4 09E0     		b	.L18
 250              	.LVL29:
 251              	.L33:
  88:hal/comm/Eeprom.c **** 	{
  89:hal/comm/Eeprom.c **** 		//Adresse mitzählen und bei Überlauf der untersten sechs Bits das EEPROM deselektieren
  90:hal/comm/Eeprom.c **** 		//und neuen Write-Befehl senden (bzw. beim letzten Datenbyte einfach nur EEPROM
  91:hal/comm/Eeprom.c **** 		//deselektieren).
  92:hal/comm/Eeprom.c **** 		//Dies ist erforderlich, da beim Beschreiben im 25128 nur die untersten sechs Bits der
  93:hal/comm/Eeprom.c **** 		//Adresse hochgezählt werden (anders als beim Lesen).
  94:hal/comm/Eeprom.c **** 		address++;
  95:hal/comm/Eeprom.c **** 		eeprom_spi_readWriteByte(*(block+i), (address & 0x0000003f)==0 || i==size-1);
 252              		.loc 1 95 3 discriminator 2 view .LVU56
 253 00d6 A8EB0401 		sub	r1, r8, r4
 254 00da B1FA81F1 		clz	r1, r1
 255 00de 4909     		lsrs	r1, r1, #5
 256 00e0 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 257              	.LVL30:
  96:hal/comm/Eeprom.c **** 		if((address & 0x0000003f)==0 && i<size-1)  //Adressbits übergelaufen, aber noch Bytes zu schreibe
 258              		.loc 1 96 3 is_stmt 1 discriminator 2 view .LVU57
 259              	.L15:
  87:hal/comm/Eeprom.c **** 	for(i=0; i<size; i++)
 260              		.loc 1 87 19 discriminator 2 view .LVU58
  87:hal/comm/Eeprom.c **** 	for(i=0; i<size; i++)
 261              		.loc 1 87 20 is_stmt 0 discriminator 2 view .LVU59
 262 00e4 0134     		adds	r4, r4, #1
 263              	.LVL31:
  87:hal/comm/Eeprom.c **** 	for(i=0; i<size; i++)
 264              		.loc 1 87 11 is_stmt 1 discriminator 2 view .LVU60
  87:hal/comm/Eeprom.c **** 	for(i=0; i<size; i++)
 265              		.loc 1 87 2 is_stmt 0 discriminator 2 view .LVU61
 266 00e6 A742     		cmp	r7, r4
 267 00e8 31D0     		beq	.L19
 268              	.LVL32:
 269              	.L18:
  94:hal/comm/Eeprom.c **** 		eeprom_spi_readWriteByte(*(block+i), (address & 0x0000003f)==0 || i==size-1);
 270              		.loc 1 94 3 is_stmt 1 view .LVU62
  94:hal/comm/Eeprom.c **** 		eeprom_spi_readWriteByte(*(block+i), (address & 0x0000003f)==0 || i==size-1);
 271              		.loc 1 94 10 is_stmt 0 view .LVU63
 272 00ea 0135     		adds	r5, r5, #1
 273              	.LVL33:
  95:hal/comm/Eeprom.c **** 		if((address & 0x0000003f)==0 && i<size-1)  //Adressbits übergelaufen, aber noch Bytes zu schreibe
 274              		.loc 1 95 3 is_stmt 1 view .LVU64
  95:hal/comm/Eeprom.c **** 		if((address & 0x0000003f)==0 && i<size-1)  //Adressbits übergelaufen, aber noch Bytes zu schreibe
 275              		.loc 1 95 66 is_stmt 0 view .LVU65
 276 00ec AB06     		lsls	r3, r5, #26
  95:hal/comm/Eeprom.c **** 		if((address & 0x0000003f)==0 && i<size-1)  //Adressbits übergelaufen, aber noch Bytes zu schreibe
 277              		.loc 1 95 3 view .LVU66
 278 00ee 16F8010F 		ldrb	r0, [r6, #1]!	@ zero_extendqisi2
  95:hal/comm/Eeprom.c **** 		if((address & 0x0000003f)==0 && i<size-1)  //Adressbits übergelaufen, aber noch Bytes zu schreibe
 279              		.loc 1 95 66 view .LVU67
 280 00f2 F0D1     		bne	.L33
  95:hal/comm/Eeprom.c **** 		if((address & 0x0000003f)==0 && i<size-1)  //Adressbits übergelaufen, aber noch Bytes zu schreibe
 281              		.loc 1 95 3 view .LVU68
 282 00f4 0121     		movs	r1, #1
 283 00f6 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 284              	.LVL34:
 285              		.loc 1 96 3 is_stmt 1 view .LVU69
 286              		.loc 1 96 32 is_stmt 0 view .LVU70
 287 00fa A045     		cmp	r8, r4
 288 00fc F2D9     		bls	.L15
 289              	.L16:
  97:hal/comm/Eeprom.c **** 		{
  98:hal/comm/Eeprom.c **** 			// wait until write finished
  99:hal/comm/Eeprom.c **** 			do
 290              		.loc 1 99 4 is_stmt 1 discriminator 1 view .LVU71
 100:hal/comm/Eeprom.c **** 			{
 101:hal/comm/Eeprom.c **** 				eeprom_spi_readWriteByte(0x05, false);  // command "Get Status"
 291              		.loc 1 101 5 discriminator 1 view .LVU72
 292 00fe 0021     		movs	r1, #0
 293 0100 0520     		movs	r0, #5
 294 0102 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 295              	.LVL35:
 102:hal/comm/Eeprom.c **** 			} while(eeprom_spi_readWriteByte(0x00, true) & 0x01);
 296              		.loc 1 102 11 discriminator 1 view .LVU73
 297              		.loc 1 102 12 is_stmt 0 discriminator 1 view .LVU74
 298 0106 0121     		movs	r1, #1
 299 0108 0020     		movs	r0, #0
 300 010a FFF7FEFF 		bl	eeprom_spi_readWriteByte
 301              	.LVL36:
 302              		.loc 1 102 4 discriminator 1 view .LVU75
 303 010e C107     		lsls	r1, r0, #31
 304 0110 F5D4     		bmi	.L16
 103:hal/comm/Eeprom.c **** 
 104:hal/comm/Eeprom.c **** 			//new "Write Enable" command
 105:hal/comm/Eeprom.c **** 			eeprom_spi_readWriteByte(0x06, true);  // command "Write Enable"
 305              		.loc 1 105 4 is_stmt 1 view .LVU76
 306 0112 0121     		movs	r1, #1
 307 0114 0620     		movs	r0, #6
 308 0116 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 309              	.LVL37:
 310              	.L17:
 106:hal/comm/Eeprom.c **** 			do
 311              		.loc 1 106 4 discriminator 1 view .LVU77
 107:hal/comm/Eeprom.c **** 			{
 108:hal/comm/Eeprom.c **** 				eeprom_spi_readWriteByte(0x05, false);  // command "Get Status"
 312              		.loc 1 108 5 discriminator 1 view .LVU78
 313 011a 0021     		movs	r1, #0
 314 011c 0520     		movs	r0, #5
 315 011e FFF7FEFF 		bl	eeprom_spi_readWriteByte
 316              	.LVL38:
 109:hal/comm/Eeprom.c **** 			} while((eeprom_spi_readWriteByte(0x00, true) & 0x02)==0x00);  // wait until "Write Enable" bit 
 317              		.loc 1 109 11 discriminator 1 view .LVU79
 318              		.loc 1 109 13 is_stmt 0 discriminator 1 view .LVU80
 319 0122 0121     		movs	r1, #1
 320 0124 0020     		movs	r0, #0
 321 0126 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 322              	.LVL39:
 323              		.loc 1 109 4 discriminator 1 view .LVU81
 324 012a 8207     		lsls	r2, r0, #30
 325 012c F5D5     		bpl	.L17
 110:hal/comm/Eeprom.c **** 
 111:hal/comm/Eeprom.c **** 			// new "Write" command (with next address)
 112:hal/comm/Eeprom.c **** 			eeprom_spi_readWriteByte(0x02, false); // command "Write"
 326              		.loc 1 112 4 is_stmt 1 view .LVU82
 327 012e 0021     		movs	r1, #0
 328 0130 0220     		movs	r0, #2
 329 0132 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 330              	.LVL40:
 113:hal/comm/Eeprom.c **** 			eeprom_spi_readWriteByte(address >> 8, false);
 331              		.loc 1 113 4 view .LVU83
 332 0136 0021     		movs	r1, #0
 333 0138 C5F30720 		ubfx	r0, r5, #8, #8
 334 013c FFF7FEFF 		bl	eeprom_spi_readWriteByte
 335              	.LVL41:
 114:hal/comm/Eeprom.c **** 			eeprom_spi_readWriteByte(address & 0xff, false);
 336              		.loc 1 114 4 view .LVU84
  87:hal/comm/Eeprom.c **** 	{
 337              		.loc 1 87 20 is_stmt 0 view .LVU85
 338 0140 0134     		adds	r4, r4, #1
 339              	.LVL42:
 340              		.loc 1 114 4 view .LVU86
 341 0142 0021     		movs	r1, #0
 342 0144 E8B2     		uxtb	r0, r5
 343 0146 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 344              	.LVL43:
  87:hal/comm/Eeprom.c **** 	{
 345              		.loc 1 87 19 is_stmt 1 view .LVU87
  87:hal/comm/Eeprom.c **** 	{
 346              		.loc 1 87 11 view .LVU88
  87:hal/comm/Eeprom.c **** 	{
 347              		.loc 1 87 2 is_stmt 0 view .LVU89
 348 014a A742     		cmp	r7, r4
 349 014c CDD1     		bne	.L18
 350              	.LVL44:
 351              	.L19:
 115:hal/comm/Eeprom.c **** 		}
 116:hal/comm/Eeprom.c **** 	}
 117:hal/comm/Eeprom.c **** 
 118:hal/comm/Eeprom.c **** 	// wait until write finished
 119:hal/comm/Eeprom.c **** 	do
 352              		.loc 1 119 2 is_stmt 1 discriminator 1 view .LVU90
 120:hal/comm/Eeprom.c **** 	{
 121:hal/comm/Eeprom.c **** 		eeprom_spi_readWriteByte(0x05, false);  // command "Get Status"
 353              		.loc 1 121 3 discriminator 1 view .LVU91
 354 014e 0021     		movs	r1, #0
 355 0150 0520     		movs	r0, #5
 356 0152 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 357              	.LVL45:
 122:hal/comm/Eeprom.c **** 	} while(eeprom_spi_readWriteByte(0x00, true) & 0x01);
 358              		.loc 1 122 9 discriminator 1 view .LVU92
 359              		.loc 1 122 10 is_stmt 0 discriminator 1 view .LVU93
 360 0156 0121     		movs	r1, #1
 361 0158 0020     		movs	r0, #0
 362 015a FFF7FEFF 		bl	eeprom_spi_readWriteByte
 363              	.LVL46:
 364              		.loc 1 122 2 discriminator 1 view .LVU94
 365 015e C307     		lsls	r3, r0, #31
 366 0160 F5D4     		bmi	.L19
 123:hal/comm/Eeprom.c **** }
 367              		.loc 1 123 1 view .LVU95
 368 0162 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 369              		.loc 1 123 1 view .LVU96
 370              		.cfi_endproc
 371              	.LFE3:
 373              		.align	1
 374 0166 00BF     		.p2align 2,,3
 375              		.global	eeprom_initConfig
 376              		.syntax unified
 377              		.thumb
 378              		.thumb_func
 380              	eeprom_initConfig:
 381              	.LVL47:
 382              	.LFB0:
  13:hal/comm/Eeprom.c **** 	// initialize the eeprom
 383              		.loc 1 13 1 is_stmt 1 view -0
 384              		.cfi_startproc
 385              		@ args = 0, pretend = 0, frame = 0
 386              		@ frame_needed = 0, uses_anonymous_args = 0
  15:hal/comm/Eeprom.c **** 	{
 387              		.loc 1 15 2 view .LVU98
 388              	.LBB8:
 389              	.LBI8:
  61:hal/comm/Eeprom.c **** {
 390              		.loc 1 61 9 view .LVU99
 391              	.LBB9:
  63:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 392              		.loc 1 63 2 view .LVU100
 393              	.LBE9:
 394              	.LBE8:
  13:hal/comm/Eeprom.c **** 	// initialize the eeprom
 395              		.loc 1 13 1 is_stmt 0 view .LVU101
 396 0168 70B5     		push	{r4, r5, r6, lr}
 397              	.LCFI4:
 398              		.cfi_def_cfa_offset 16
 399              		.cfi_offset 4, -16
 400              		.cfi_offset 5, -12
 401              		.cfi_offset 6, -8
 402              		.cfi_offset 14, -4
  13:hal/comm/Eeprom.c **** 	// initialize the eeprom
 403              		.loc 1 13 1 view .LVU102
 404 016a 0646     		mov	r6, r0
 405 016c 0D46     		mov	r5, r1
 406              	.LBB11:
 407              	.LBB10:
  63:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 408              		.loc 1 63 2 view .LVU103
 409 016e 0320     		movs	r0, #3
 410              	.LVL48:
  63:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 411              		.loc 1 63 2 view .LVU104
 412 0170 0021     		movs	r1, #0
 413              	.LVL49:
  63:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 414              		.loc 1 63 2 view .LVU105
 415 0172 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 416              	.LVL50:
  64:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
 417              		.loc 1 64 2 is_stmt 1 view .LVU106
 418 0176 0021     		movs	r1, #0
 419 0178 0720     		movs	r0, #7
 420 017a FFF7FEFF 		bl	eeprom_spi_readWriteByte
 421              	.LVL51:
  65:hal/comm/Eeprom.c **** 	return eeprom_spi_readWriteByte(0, true);
 422              		.loc 1 65 2 view .LVU107
 423 017e 0021     		movs	r1, #0
 424 0180 FF20     		movs	r0, #255
 425 0182 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 426              	.LVL52:
  66:hal/comm/Eeprom.c **** }
 427              		.loc 1 66 2 view .LVU108
  66:hal/comm/Eeprom.c **** }
 428              		.loc 1 66 9 is_stmt 0 view .LVU109
 429 0186 0121     		movs	r1, #1
 430 0188 0020     		movs	r0, #0
 431 018a FFF7FEFF 		bl	eeprom_spi_readWriteByte
 432              	.LVL53:
  66:hal/comm/Eeprom.c **** }
 433              		.loc 1 66 9 view .LVU110
 434              	.LBE10:
 435              	.LBE11:
  15:hal/comm/Eeprom.c **** 	{
 436              		.loc 1 15 5 view .LVU111
 437 018e 6428     		cmp	r0, #100
 438 0190 13D0     		beq	.L35
  18:hal/comm/Eeprom.c **** 
 439              		.loc 1 18 3 is_stmt 1 view .LVU112
 440 0192 0021     		movs	r1, #0
 441 0194 40F2FF70 		movw	r0, #2047
 442 0198 FFF7FEFF 		bl	eeprom_writeConfigByte
 443              	.LVL54:
  21:hal/comm/Eeprom.c **** 
 444              		.loc 1 21 3 view .LVU113
 445 019c 1022     		movs	r2, #16
 446 019e 3146     		mov	r1, r6
 447 01a0 0020     		movs	r0, #0
 448 01a2 FFF7FEFF 		bl	eeprom_writeConfigBlock
 449              	.LVL55:
  24:hal/comm/Eeprom.c **** 
 450              		.loc 1 24 3 view .LVU114
 451 01a6 2946     		mov	r1, r5
 452 01a8 4020     		movs	r0, #64
 453 01aa 9022     		movs	r2, #144
 454 01ac FFF7FEFF 		bl	eeprom_writeConfigBlock
 455              	.LVL56:
  27:hal/comm/Eeprom.c **** 	}
 456              		.loc 1 27 3 view .LVU115
 457 01b0 6421     		movs	r1, #100
 458 01b2 40F2FF70 		movw	r0, #2047
 459 01b6 FFF7FEFF 		bl	eeprom_writeConfigByte
 460              	.LVL57:
 461              	.L35:
  31:hal/comm/Eeprom.c **** 
 462              		.loc 1 31 2 view .LVU116
 463              	.LBB12:
 464              	.LBI12:
 124:hal/comm/Eeprom.c **** 
 125:hal/comm/Eeprom.c **** /* read a block from configuration eeprom						*/
 126:hal/comm/Eeprom.c **** /* (address: (0..2047) (block: start address) (size: max. 64)) 	*/
 127:hal/comm/Eeprom.c **** void eeprom_readConfigBlock(uint32_t address, uint8_t *block, uint32_t size)
 465              		.loc 1 127 6 view .LVU117
 466              	.LBB13:
 128:hal/comm/Eeprom.c **** {
 129:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x03, false);  // command "Read"
 467              		.loc 1 129 2 view .LVU118
 468 01ba 0021     		movs	r1, #0
 469 01bc 0320     		movs	r0, #3
 470 01be FFF7FEFF 		bl	eeprom_spi_readWriteByte
 471              	.LVL58:
 130:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 472              		.loc 1 130 2 view .LVU119
 473 01c2 0021     		movs	r1, #0
 131:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
 132:hal/comm/Eeprom.c **** 
 133:hal/comm/Eeprom.c **** 	uint32_t i;
 134:hal/comm/Eeprom.c **** 	for(i=0; i<size; i++)
 474              		.loc 1 134 7 is_stmt 0 view .LVU120
 475 01c4 0C46     		mov	r4, r1
 130:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 476              		.loc 1 130 2 view .LVU121
 477 01c6 0846     		mov	r0, r1
 478 01c8 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 479              	.LVL59:
 131:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
 480              		.loc 1 131 2 is_stmt 1 view .LVU122
 481 01cc 2146     		mov	r1, r4
 482 01ce 2046     		mov	r0, r4
 483 01d0 013E     		subs	r6, r6, #1
 484              	.LVL60:
 131:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
 485              		.loc 1 131 2 is_stmt 0 view .LVU123
 486 01d2 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 487              	.LVL61:
 133:hal/comm/Eeprom.c **** 	for(i=0; i<size; i++)
 488              		.loc 1 133 2 is_stmt 1 view .LVU124
 489              		.loc 1 134 2 view .LVU125
 490              		.loc 1 134 11 view .LVU126
 491              	.L36:
 135:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 492              		.loc 1 135 3 view .LVU127
 493              		.loc 1 135 16 is_stmt 0 view .LVU128
 494 01d6 A4F10F01 		sub	r1, r4, #15
 495 01da B1FA81F1 		clz	r1, r1
 496 01de 0020     		movs	r0, #0
 497 01e0 4909     		lsrs	r1, r1, #5
 498 01e2 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 499              	.LVL62:
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 500              		.loc 1 134 20 view .LVU129
 501 01e6 0134     		adds	r4, r4, #1
 502              	.LVL63:
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 503              		.loc 1 134 2 view .LVU130
 504 01e8 102C     		cmp	r4, #16
 505              		.loc 1 135 14 view .LVU131
 506 01ea 06F8010F 		strb	r0, [r6, #1]!
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 507              		.loc 1 134 19 is_stmt 1 view .LVU132
 508              	.LVL64:
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 509              		.loc 1 134 11 view .LVU133
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 510              		.loc 1 134 2 is_stmt 0 view .LVU134
 511 01ee F2D1     		bne	.L36
 512              	.LVL65:
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 513              		.loc 1 134 2 view .LVU135
 514              	.LBE13:
 515              	.LBE12:
  34:hal/comm/Eeprom.c **** }
 516              		.loc 1 34 2 is_stmt 1 view .LVU136
 517              	.LBB14:
 518              	.LBI14:
 127:hal/comm/Eeprom.c **** {
 519              		.loc 1 127 6 view .LVU137
 520              	.LBB15:
 129:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 521              		.loc 1 129 2 view .LVU138
 522 01f0 0021     		movs	r1, #0
 523 01f2 0320     		movs	r0, #3
 524 01f4 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 525              	.LVL66:
 130:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
 526              		.loc 1 130 2 view .LVU139
 527 01f8 0021     		movs	r1, #0
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 528              		.loc 1 134 7 is_stmt 0 view .LVU140
 529 01fa 0C46     		mov	r4, r1
 130:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
 530              		.loc 1 130 2 view .LVU141
 531 01fc 0846     		mov	r0, r1
 532 01fe FFF7FEFF 		bl	eeprom_spi_readWriteByte
 533              	.LVL67:
 131:hal/comm/Eeprom.c **** 
 534              		.loc 1 131 2 is_stmt 1 view .LVU142
 535 0202 2146     		mov	r1, r4
 536 0204 4020     		movs	r0, #64
 537 0206 013D     		subs	r5, r5, #1
 538              	.LVL68:
 131:hal/comm/Eeprom.c **** 
 539              		.loc 1 131 2 is_stmt 0 view .LVU143
 540 0208 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 541              	.LVL69:
 133:hal/comm/Eeprom.c **** 	for(i=0; i<size; i++)
 542              		.loc 1 133 2 is_stmt 1 view .LVU144
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 543              		.loc 1 134 2 view .LVU145
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 544              		.loc 1 134 11 view .LVU146
 545              	.L37:
 546              		.loc 1 135 3 view .LVU147
 547              		.loc 1 135 16 is_stmt 0 view .LVU148
 548 020c A4F18F01 		sub	r1, r4, #143
 549 0210 B1FA81F1 		clz	r1, r1
 550 0214 0020     		movs	r0, #0
 551 0216 4909     		lsrs	r1, r1, #5
 552 0218 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 553              	.LVL70:
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 554              		.loc 1 134 20 view .LVU149
 555 021c 0134     		adds	r4, r4, #1
 556              	.LVL71:
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 557              		.loc 1 134 2 view .LVU150
 558 021e 902C     		cmp	r4, #144
 559              		.loc 1 135 14 view .LVU151
 560 0220 05F8010F 		strb	r0, [r5, #1]!
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 561              		.loc 1 134 19 is_stmt 1 view .LVU152
 562              	.LVL72:
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 563              		.loc 1 134 11 view .LVU153
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 564              		.loc 1 134 2 is_stmt 0 view .LVU154
 565 0224 F2D1     		bne	.L37
 566              	.LBE15:
 567              	.LBE14:
  35:hal/comm/Eeprom.c **** 
 568              		.loc 1 35 1 view .LVU155
 569 0226 70BD     		pop	{r4, r5, r6, pc}
  35:hal/comm/Eeprom.c **** 
 570              		.loc 1 35 1 view .LVU156
 571              		.cfi_endproc
 572              	.LFE0:
 574              		.align	1
 575              		.p2align 2,,3
 576              		.global	eeprom_readConfigBlock
 577              		.syntax unified
 578              		.thumb
 579              		.thumb_func
 581              	eeprom_readConfigBlock:
 582              	.LVL73:
 583              	.LFB4:
 128:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x03, false);  // command "Read"
 584              		.loc 1 128 1 is_stmt 1 view -0
 585              		.cfi_startproc
 586              		@ args = 0, pretend = 0, frame = 0
 587              		@ frame_needed = 0, uses_anonymous_args = 0
 128:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x03, false);  // command "Read"
 588              		.loc 1 128 1 is_stmt 0 view .LVU158
 589 0228 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 590              	.LCFI5:
 591              		.cfi_def_cfa_offset 24
 592              		.cfi_offset 3, -24
 593              		.cfi_offset 4, -20
 594              		.cfi_offset 5, -16
 595              		.cfi_offset 6, -12
 596              		.cfi_offset 7, -8
 597              		.cfi_offset 14, -4
 128:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(0x03, false);  // command "Read"
 598              		.loc 1 128 1 view .LVU159
 599 022a 0446     		mov	r4, r0
 600 022c 1546     		mov	r5, r2
 601 022e 0E46     		mov	r6, r1
 129:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 602              		.loc 1 129 2 view .LVU160
 603 0230 0320     		movs	r0, #3
 604              	.LVL74:
 129:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 605              		.loc 1 129 2 view .LVU161
 606 0232 0021     		movs	r1, #0
 607              	.LVL75:
 129:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address >> 8, false);
 608              		.loc 1 129 2 is_stmt 1 view .LVU162
 609 0234 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 610              	.LVL76:
 130:hal/comm/Eeprom.c **** 	eeprom_spi_readWriteByte(address & 0xff, false);
 611              		.loc 1 130 2 view .LVU163
 612 0238 0021     		movs	r1, #0
 613 023a C4F30720 		ubfx	r0, r4, #8, #8
 614 023e FFF7FEFF 		bl	eeprom_spi_readWriteByte
 615              	.LVL77:
 131:hal/comm/Eeprom.c **** 
 616              		.loc 1 131 2 view .LVU164
 617 0242 0021     		movs	r1, #0
 618 0244 E0B2     		uxtb	r0, r4
 619 0246 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 620              	.LVL78:
 133:hal/comm/Eeprom.c **** 	for(i=0; i<size; i++)
 621              		.loc 1 133 2 view .LVU165
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 622              		.loc 1 134 2 view .LVU166
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 623              		.loc 1 134 11 view .LVU167
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 624              		.loc 1 134 2 is_stmt 0 view .LVU168
 625 024a 8DB1     		cbz	r5, .L44
 626 024c 7719     		adds	r7, r6, r5
 627 024e 741E     		subs	r4, r6, #1
 628              	.LVL79:
 629              		.loc 1 135 51 view .LVU169
 630 0250 013D     		subs	r5, r5, #1
 631              	.LVL80:
 632              		.loc 1 135 51 view .LVU170
 633 0252 013F     		subs	r7, r7, #1
 634 0254 C6F10106 		rsb	r6, r6, #1
 635              	.LVL81:
 636              	.L46:
 637              		.loc 1 135 3 is_stmt 1 discriminator 3 view .LVU171
 638              		.loc 1 135 16 is_stmt 0 discriminator 3 view .LVU172
 639 0258 3119     		adds	r1, r6, r4
 640 025a 491B     		subs	r1, r1, r5
 641 025c B1FA81F1 		clz	r1, r1
 642 0260 0020     		movs	r0, #0
 643 0262 4909     		lsrs	r1, r1, #5
 644 0264 FFF7FEFF 		bl	eeprom_spi_readWriteByte
 645              	.LVL82:
 646              		.loc 1 135 14 discriminator 3 view .LVU173
 647 0268 04F8010F 		strb	r0, [r4, #1]!
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 648              		.loc 1 134 19 is_stmt 1 discriminator 3 view .LVU174
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 649              		.loc 1 134 11 discriminator 3 view .LVU175
 134:hal/comm/Eeprom.c **** 		*(block+i) = eeprom_spi_readWriteByte(0, i==size-1);  // unselect EEPROM with last written byte
 650              		.loc 1 134 2 is_stmt 0 discriminator 3 view .LVU176
 651 026c BC42     		cmp	r4, r7
 652 026e F3D1     		bne	.L46
 653              	.LVL83:
 654              	.L44:
 136:hal/comm/Eeprom.c **** }
 655              		.loc 1 136 1 view .LVU177
 656 0270 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 657              		.cfi_endproc
 658              	.LFE4:
 660              	.Letext0:
 661              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 662              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 663              		.file 4 "hal/comm/../../TMC-API/tmc/helpers/Types.h"
 664              		.file 5 "hal/comm/../../Definitions.h"
 665              		.file 6 "hal/comm/SPI.h"
DEFINED SYMBOLS
                            *ABS*:00000000 Eeprom.c
C:\Users\forre\AppData\Local\Temp\cchTVFXa.s:17     .text:00000000 $t
C:\Users\forre\AppData\Local\Temp\cchTVFXa.s:24     .text:00000000 eeprom_writeConfigByte
C:\Users\forre\AppData\Local\Temp\cchTVFXa.s:118    .text:0000005c eeprom_readConfigByte
C:\Users\forre\AppData\Local\Temp\cchTVFXa.s:174    .text:00000088 eeprom_writeConfigBlock
C:\Users\forre\AppData\Local\Temp\cchTVFXa.s:380    .text:00000168 eeprom_initConfig
C:\Users\forre\AppData\Local\Temp\cchTVFXa.s:581    .text:00000228 eeprom_readConfigBlock

UNDEFINED SYMBOLS
eeprom_spi_readWriteByte
