   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"Flags.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.align	1
  18              		.p2align 2,,3
  19              		.global	flags_setStatusFlag
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	flags_setStatusFlag:
  25              	.LVL0:
  26              	.LFB0:
  27              		.file 1 "hal/Flags.c"
   1:hal/Flags.c   **** /*
   2:hal/Flags.c   ****  * Flags.c
   3:hal/Flags.c   ****  *
   4:hal/Flags.c   ****  *  Created on: 31.03.2019
   5:hal/Flags.c   ****  *      Author: ED
   6:hal/Flags.c   ****  */
   7:hal/Flags.c   **** 
   8:hal/Flags.c   **** #include "Flags.h"
   9:hal/Flags.c   **** 
  10:hal/Flags.c   **** volatile u32 statusFlags = 0;	// error and status flags (Overvoltage, Overcurrent,...)
  11:hal/Flags.c   **** 
  12:hal/Flags.c   **** /* set status flags */
  13:hal/Flags.c   **** void flags_setStatusFlag(u32 flag)
  14:hal/Flags.c   **** {
  28              		.loc 1 14 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  15:hal/Flags.c   **** 	statusFlags |= flag;
  33              		.loc 1 15 2 view .LVU1
  34              		.loc 1 15 14 is_stmt 0 view .LVU2
  35 0000 024A     		ldr	r2, .L3
  36 0002 1368     		ldr	r3, [r2]
  37 0004 0343     		orrs	r3, r3, r0
  38 0006 1360     		str	r3, [r2]
  16:hal/Flags.c   **** }
  39              		.loc 1 16 1 view .LVU3
  40 0008 7047     		bx	lr
  41              	.L4:
  42 000a 00BF     		.align	2
  43              	.L3:
  44 000c 00000000 		.word	.LANCHOR0
  45              		.cfi_endproc
  46              	.LFE0:
  48              		.align	1
  49              		.p2align 2,,3
  50              		.global	flags_clearStatusFlag
  51              		.syntax unified
  52              		.thumb
  53              		.thumb_func
  55              	flags_clearStatusFlag:
  56              	.LVL1:
  57              	.LFB1:
  17:hal/Flags.c   **** 
  18:hal/Flags.c   **** /* clear status flag */
  19:hal/Flags.c   **** void flags_clearStatusFlag(u32 flag)
  20:hal/Flags.c   **** {
  58              		.loc 1 20 1 is_stmt 1 view -0
  59              		.cfi_startproc
  60              		@ args = 0, pretend = 0, frame = 0
  61              		@ frame_needed = 0, uses_anonymous_args = 0
  62              		@ link register save eliminated.
  21:hal/Flags.c   **** 	statusFlags &= ~flag;
  63              		.loc 1 21 2 view .LVU5
  64              		.loc 1 21 14 is_stmt 0 view .LVU6
  65 0010 024A     		ldr	r2, .L6
  66 0012 1368     		ldr	r3, [r2]
  67 0014 23EA0003 		bic	r3, r3, r0
  68 0018 1360     		str	r3, [r2]
  22:hal/Flags.c   **** }
  69              		.loc 1 22 1 view .LVU7
  70 001a 7047     		bx	lr
  71              	.L7:
  72              		.align	2
  73              	.L6:
  74 001c 00000000 		.word	.LANCHOR0
  75              		.cfi_endproc
  76              	.LFE1:
  78              		.align	1
  79              		.p2align 2,,3
  80              		.global	flags_setStatusFlagEnabled
  81              		.syntax unified
  82              		.thumb
  83              		.thumb_func
  85              	flags_setStatusFlagEnabled:
  86              	.LVL2:
  87              	.LFB2:
  23:hal/Flags.c   **** 
  24:hal/Flags.c   **** /* clear/set status flag */
  25:hal/Flags.c   **** void flags_setStatusFlagEnabled(u32 flag, bool enabled)
  26:hal/Flags.c   **** {
  88              		.loc 1 26 1 is_stmt 1 view -0
  89              		.cfi_startproc
  90              		@ args = 0, pretend = 0, frame = 0
  91              		@ frame_needed = 0, uses_anonymous_args = 0
  92              		@ link register save eliminated.
  27:hal/Flags.c   **** 	if (enabled)
  93              		.loc 1 27 2 view .LVU9
  28:hal/Flags.c   **** 		statusFlags |= flag;
  94              		.loc 1 28 15 is_stmt 0 view .LVU10
  95 0020 044A     		ldr	r2, .L11
  96 0022 1368     		ldr	r3, [r2]
  27:hal/Flags.c   **** 	if (enabled)
  97              		.loc 1 27 5 view .LVU11
  98 0024 11B1     		cbz	r1, .L9
  99              		.loc 1 28 3 is_stmt 1 view .LVU12
 100              		.loc 1 28 15 is_stmt 0 view .LVU13
 101 0026 1843     		orrs	r0, r0, r3
 102              	.LVL3:
 103              		.loc 1 28 15 view .LVU14
 104 0028 1060     		str	r0, [r2]
 105 002a 7047     		bx	lr
 106              	.LVL4:
 107              	.L9:
  29:hal/Flags.c   **** 	else
  30:hal/Flags.c   **** 		statusFlags &= ~flag;
 108              		.loc 1 30 3 is_stmt 1 view .LVU15
 109              		.loc 1 30 15 is_stmt 0 view .LVU16
 110 002c 23EA0000 		bic	r0, r3, r0
 111              	.LVL5:
 112              		.loc 1 30 15 view .LVU17
 113 0030 1060     		str	r0, [r2]
  31:hal/Flags.c   **** }
 114              		.loc 1 31 1 view .LVU18
 115 0032 7047     		bx	lr
 116              	.L12:
 117              		.align	2
 118              	.L11:
 119 0034 00000000 		.word	.LANCHOR0
 120              		.cfi_endproc
 121              	.LFE2:
 123              		.align	1
 124              		.p2align 2,,3
 125              		.global	flags_isStatusFlagSet
 126              		.syntax unified
 127              		.thumb
 128              		.thumb_func
 130              	flags_isStatusFlagSet:
 131              	.LVL6:
 132              	.LFB3:
  32:hal/Flags.c   **** 
  33:hal/Flags.c   **** /* check if status flag is set */
  34:hal/Flags.c   **** u8 flags_isStatusFlagSet(u32 flag)
  35:hal/Flags.c   **** {
 133              		.loc 1 35 1 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              		@ link register save eliminated.
  36:hal/Flags.c   **** 	if(statusFlags & flag)
 138              		.loc 1 36 2 view .LVU20
 139              		.loc 1 36 17 is_stmt 0 view .LVU21
 140 0038 034B     		ldr	r3, .L14
 141 003a 1B68     		ldr	r3, [r3]
 142              		.loc 1 36 4 view .LVU22
 143 003c 0342     		tst	r3, r0
  37:hal/Flags.c   **** 		return true;
  38:hal/Flags.c   **** 	else
  39:hal/Flags.c   **** 		return false;
  40:hal/Flags.c   **** }
 144              		.loc 1 40 1 view .LVU23
 145 003e 14BF     		ite	ne
 146 0040 0120     		movne	r0, #1
 147              	.LVL7:
 148              		.loc 1 40 1 view .LVU24
 149 0042 0020     		moveq	r0, #0
 150 0044 7047     		bx	lr
 151              	.L15:
 152 0046 00BF     		.align	2
 153              	.L14:
 154 0048 00000000 		.word	.LANCHOR0
 155              		.cfi_endproc
 156              	.LFE3:
 158              		.align	1
 159              		.p2align 2,,3
 160              		.global	flags_resetErrorFlags
 161              		.syntax unified
 162              		.thumb
 163              		.thumb_func
 165              	flags_resetErrorFlags:
 166              	.LFB4:
  41:hal/Flags.c   **** 
  42:hal/Flags.c   **** /* reset error flags */
  43:hal/Flags.c   **** void flags_resetErrorFlags()
  44:hal/Flags.c   **** {
 167              		.loc 1 44 1 is_stmt 1 view -0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 0
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171              		@ link register save eliminated.
  45:hal/Flags.c   **** 	flags_clearStatusFlag(OVERCURRENT|HALLERROR|DRIVER_ERROR);
 172              		.loc 1 45 2 view .LVU26
 173              	.LVL8:
 174              	.LBB12:
 175              	.LBI12:
  19:hal/Flags.c   **** {
 176              		.loc 1 19 6 view .LVU27
 177              	.LBB13:
  21:hal/Flags.c   **** }
 178              		.loc 1 21 2 view .LVU28
  21:hal/Flags.c   **** }
 179              		.loc 1 21 14 is_stmt 0 view .LVU29
 180 004c 024A     		ldr	r2, .L17
 181 004e 1368     		ldr	r3, [r2]
 182 0050 23F06103 		bic	r3, r3, #97
 183 0054 1360     		str	r3, [r2]
 184              	.LVL9:
  21:hal/Flags.c   **** }
 185              		.loc 1 21 14 view .LVU30
 186              	.LBE13:
 187              	.LBE12:
  46:hal/Flags.c   **** }
 188              		.loc 1 46 1 view .LVU31
 189 0056 7047     		bx	lr
 190              	.L18:
 191              		.align	2
 192              	.L17:
 193 0058 00000000 		.word	.LANCHOR0
 194              		.cfi_endproc
 195              	.LFE4:
 197              		.align	1
 198              		.p2align 2,,3
 199              		.global	flags_getAllStatusFlags
 200              		.syntax unified
 201              		.thumb
 202              		.thumb_func
 204              	flags_getAllStatusFlags:
 205              	.LFB5:
  47:hal/Flags.c   **** 
  48:hal/Flags.c   **** /* get status flags and afterwards reset error flags */
  49:hal/Flags.c   **** u32 flags_getAllStatusFlags()
  50:hal/Flags.c   **** {
 206              		.loc 1 50 1 is_stmt 1 view -0
 207              		.cfi_startproc
 208              		@ args = 0, pretend = 0, frame = 0
 209              		@ frame_needed = 0, uses_anonymous_args = 0
 210              		@ link register save eliminated.
  51:hal/Flags.c   **** 	u32 flags = statusFlags;
 211              		.loc 1 51 2 view .LVU33
 212              		.loc 1 51 6 is_stmt 0 view .LVU34
 213 005c 034B     		ldr	r3, .L20
 214 005e 1868     		ldr	r0, [r3]
 215              	.LVL10:
  52:hal/Flags.c   **** 	// reset error flags
  53:hal/Flags.c   **** 	flags_resetErrorFlags();
 216              		.loc 1 53 2 is_stmt 1 view .LVU35
 217              	.LBB14:
 218              	.LBI14:
  43:hal/Flags.c   **** {
 219              		.loc 1 43 6 view .LVU36
 220              	.LBE14:
  45:hal/Flags.c   **** }
 221              		.loc 1 45 2 view .LVU37
 222              	.LBB17:
 223              	.LBB15:
 224              	.LBI15:
  19:hal/Flags.c   **** {
 225              		.loc 1 19 6 view .LVU38
 226              	.LBB16:
  21:hal/Flags.c   **** }
 227              		.loc 1 21 2 view .LVU39
  21:hal/Flags.c   **** }
 228              		.loc 1 21 14 is_stmt 0 view .LVU40
 229 0060 1A68     		ldr	r2, [r3]
 230 0062 22F06102 		bic	r2, r2, #97
 231 0066 1A60     		str	r2, [r3]
 232              	.LVL11:
  21:hal/Flags.c   **** }
 233              		.loc 1 21 14 view .LVU41
 234              	.LBE16:
 235              	.LBE15:
 236              	.LBE17:
  54:hal/Flags.c   **** 	return flags;
 237              		.loc 1 54 2 is_stmt 1 view .LVU42
  55:hal/Flags.c   **** }
 238              		.loc 1 55 1 is_stmt 0 view .LVU43
 239 0068 7047     		bx	lr
 240              	.L21:
 241 006a 00BF     		.align	2
 242              	.L20:
 243 006c 00000000 		.word	.LANCHOR0
 244              		.cfi_endproc
 245              	.LFE5:
 247              		.align	1
 248              		.p2align 2,,3
 249              		.global	flags_getErrorFlags
 250              		.syntax unified
 251              		.thumb
 252              		.thumb_func
 254              	flags_getErrorFlags:
 255              	.LFB6:
  56:hal/Flags.c   **** 
  57:hal/Flags.c   **** /* get and afterwards reset error flags */
  58:hal/Flags.c   **** u32 flags_getErrorFlags()
  59:hal/Flags.c   **** {
 256              		.loc 1 59 1 is_stmt 1 view -0
 257              		.cfi_startproc
 258              		@ args = 0, pretend = 0, frame = 0
 259              		@ frame_needed = 0, uses_anonymous_args = 0
 260              		@ link register save eliminated.
  60:hal/Flags.c   **** 	u32 flags = statusFlags;
 261              		.loc 1 60 2 view .LVU45
 262              		.loc 1 60 6 is_stmt 0 view .LVU46
 263 0070 044B     		ldr	r3, .L23
 264 0072 1868     		ldr	r0, [r3]
 265              	.LVL12:
  61:hal/Flags.c   **** 	u32 mask = OVERCURRENT|UNDERVOLTAGE|OVERTEMPERATURE|HALLERROR|DRIVER_ERROR;
 266              		.loc 1 61 2 is_stmt 1 view .LVU47
  62:hal/Flags.c   **** 
  63:hal/Flags.c   **** 	// return only error flags
  64:hal/Flags.c   **** 	flags &= mask;
 267              		.loc 1 64 2 view .LVU48
  65:hal/Flags.c   **** 
  66:hal/Flags.c   **** 	// reset error flags
  67:hal/Flags.c   **** 	flags_resetErrorFlags();
 268              		.loc 1 67 2 view .LVU49
 269              	.LBB18:
 270              	.LBI18:
  43:hal/Flags.c   **** {
 271              		.loc 1 43 6 view .LVU50
 272              	.LBE18:
  45:hal/Flags.c   **** }
 273              		.loc 1 45 2 view .LVU51
 274              	.LBB23:
 275              	.LBB19:
 276              	.LBI19:
  19:hal/Flags.c   **** {
 277              		.loc 1 19 6 view .LVU52
 278              	.LBB20:
  21:hal/Flags.c   **** }
 279              		.loc 1 21 2 view .LVU53
  21:hal/Flags.c   **** }
 280              		.loc 1 21 14 is_stmt 0 view .LVU54
 281 0074 1A68     		ldr	r2, [r3]
 282              	.LBE20:
 283              	.LBE19:
 284              	.LBE23:
  68:hal/Flags.c   ****     return flags;
  69:hal/Flags.c   **** }
 285              		.loc 1 69 1 view .LVU55
 286 0076 00F06B00 		and	r0, r0, #107
 287              	.LVL13:
 288              	.LBB24:
 289              	.LBB22:
 290              	.LBB21:
  21:hal/Flags.c   **** }
 291              		.loc 1 21 14 view .LVU56
 292 007a 22F06102 		bic	r2, r2, #97
 293 007e 1A60     		str	r2, [r3]
 294              	.LVL14:
  21:hal/Flags.c   **** }
 295              		.loc 1 21 14 view .LVU57
 296              	.LBE21:
 297              	.LBE22:
 298              	.LBE24:
  68:hal/Flags.c   ****     return flags;
 299              		.loc 1 68 5 is_stmt 1 view .LVU58
 300              		.loc 1 69 1 is_stmt 0 view .LVU59
 301 0080 7047     		bx	lr
 302              	.L24:
 303 0082 00BF     		.align	2
 304              	.L23:
 305 0084 00000000 		.word	.LANCHOR0
 306              		.cfi_endproc
 307              	.LFE6:
 309              		.global	statusFlags
 310              		.bss
 311              		.align	2
 312              		.set	.LANCHOR0,. + 0
 315              	statusFlags:
 316 0000 00000000 		.space	4
 317              		.text
 318              	.Letext0:
 319              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 320              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 321              		.file 4 "hal/../TMC-API/tmc/helpers/Types.h"
DEFINED SYMBOLS
                            *ABS*:00000000 Flags.c
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:17     .text:00000000 $t
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:24     .text:00000000 flags_setStatusFlag
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:44     .text:0000000c $d
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:48     .text:00000010 $t
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:55     .text:00000010 flags_clearStatusFlag
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:74     .text:0000001c $d
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:78     .text:00000020 $t
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:85     .text:00000020 flags_setStatusFlagEnabled
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:119    .text:00000034 $d
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:123    .text:00000038 $t
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:130    .text:00000038 flags_isStatusFlagSet
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:154    .text:00000048 $d
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:158    .text:0000004c $t
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:165    .text:0000004c flags_resetErrorFlags
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:193    .text:00000058 $d
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:197    .text:0000005c $t
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:204    .text:0000005c flags_getAllStatusFlags
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:243    .text:0000006c $d
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:247    .text:00000070 $t
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:254    .text:00000070 flags_getErrorFlags
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:305    .text:00000084 $d
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:315    .bss:00000000 statusFlags
C:\Users\forre\AppData\Local\Temp\ccvR59G6.s:311    .bss:00000000 $d

NO UNDEFINED SYMBOLS
